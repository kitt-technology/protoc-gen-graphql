syntax = "proto3";

package books;

import "graphql/graphql.proto";

option go_package = "example/books;books";

service Books {
  option (graphql.host) =
  "localhost:50051";

  rpc getBooks(GetBooksRequest) returns (GetBooksResponse) {}

  rpc getBooksByAuthor(GetBooksRequest) returns (GetBooksByAuthorResponse) {
    option (graphql.batch) = {
      keys: "ids",
      results: "results",
    };
  }
}

message GetBooksRequest {
  repeated string ids = 1;
}

message GetBooksResponse {
  repeated Book books = 1;
}

message GetBooksByAuthorResponse {
  repeated BooksByAuthor results = 1;
}

message BooksByAuthor {
  string author_id = 1;
  repeated Book books = 2;
}

message Book {
  string id = 1;
  string name = 2;
  string author_id = 3;
}

